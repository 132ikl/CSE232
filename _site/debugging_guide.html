<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugging Guide</title>
    <link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet">
    <link href="/CSE232/assets/css/syntax.css" rel="stylesheet">
    <style>
        img {
            box-shadow: 8px 8px 8px #888888;
        }
        #course-calendar {
            text-align: center;
            width: 100%;
        }
        #course-calendar td {
            width: calc(100% / 6);
            height: 60px;
        }
        #course-calendar td:first-child {
            font-weight: 600;
        }
    </style>
</head>
<body class="py-2">
    <nav class="UnderlineNav mx-auto mb-3 position-sticky top-0 bg-white" aria-label="Foo bar" style="max-width: 1000px; z-index: 999;">
    <div class="UnderlineNav-body">
        
            <a class="UnderlineNav-item" href="/CSE232/" >
                Home
            </a>
        
            <a class="UnderlineNav-item" href="/CSE232/syllabus.html" >
                Syllabus
            </a>
        
            <a class="UnderlineNav-item" href="/CSE232/lectures.html" >
                Lectures
            </a>
        
            <a class="UnderlineNav-item" href="/CSE232/labs.html" >
                Labs
            </a>
        
            <a class="UnderlineNav-item" href="/CSE232/setup.html" >
                Setup
            </a>
        
    </div>
    <div class="UnderlineNav-actions">
        <a class="btn btn-sm mr-1" href="https://piazza.com/" role="button" target="_blank">Piazza</a>
        <a class="btn btn-sm" href="https://class.mimir.io/" role="button" target="_blank">Mimir</a>
    </div>
</nav>
    <div class="markdown-body mx-auto" style="max-width: 1000px;">
        <div class="border rounded-2 px-5 py-2 anim-fade-in">
            <h1 id="debugging-guide">Debugging Guide</h1>

<p>If you weren’t taught how to use a debugger in your previous programming class, or you just need a refresher, you’ve come to the right place – this is a debugging guide. I’m using Visual Studio Code with Python in this demonstration, but, the same principles will apply to most other code editors, and all other languages.</p>

<p>If you’re coming from CSE231, you’re probably familiar with <a href="http://pythontutor.com/">PythonTutor</a>. A debugger is like PythonTutor, but integrated within your code editor and not limited to being inside the browser.</p>

<p>We <em>highly</em> recommend that you become acquainted with a debugger for this course and for your computer science/engineering career in general. That being said, <em>you could</em> go through this course without knowing how to use one, but, you’d only be making it harder for yourself.</p>

<h2 id="control-and-the-call-stack">Control and The Call Stack</h2>

<p>Before we discuss the debugger, however, it’s important to preface the foundational aspect of any program, i.e., how programs run.</p>

<p>No matter the programming language, the <strong>control</strong> of the program will always attempt to go as far down the script as it can. When control has reached the bottom of the script, where no other statements are present, that’s when control has officially ended, meaning that the script terminates. Control can go <em>up</em> the script by using loops or functions, but it will naturally try to climb back down.</p>

<p>For an example, let’s take this simple Python program that calculates the average value of a list of random integers:</p>

<div align="center">
    <img src="assets/images/debugging-guide/debugging-code.png" />
</div>

<p>The first series of steps we would expect to take, here, would be the defining of imports and functions, correct? Otherwise, we wouldn’t be able to call <code class="language-plaintext highlighter-rouge">average()</code> or <code class="language-plaintext highlighter-rouge">randint()</code> in <code class="language-plaintext highlighter-rouge">main()</code> as we’re doing right now.</p>

<p>And, you’d be correct in this assumption. This is why we always put imports at the top, with function definitions following it.</p>

<div align="center">
    <img src="assets/images/debugging-guide/debugging-code-1.png" />
</div>

<p>The red line, here, shows the control flowing from the top of the script to the furthest point it can go down. We import <code class="language-plaintext highlighter-rouge">randint()</code>, define our two user-made functions, and then we call <code class="language-plaintext highlighter-rouge">main()</code> in the global namespace – meaning that we now jump <em>into</em> <code class="language-plaintext highlighter-rouge">main()</code> to run its code.</p>

<div align="center">
    <img src="assets/images/debugging-guide/debugging-code-2.png" />
</div>

<p>The <code class="language-plaintext highlighter-rouge">main()</code> function then has a multitude of steps to get through. We define a list, and append five random integers to it. Control is still flowing as far down as it can, but the for-loop will bring control back up for five iterations.</p>

<p>We then continue down to line 15, where we call the <code class="language-plaintext highlighter-rouge">average()</code> function. Like <code class="language-plaintext highlighter-rouge">main()</code>, control will still try to go as far down as possible, it’s just that we’re preventing it from doing so by re-routing it to different places.</p>

<p>If we generalize a bit, this is what we should expect:</p>

<div align="center">
    <img src="assets/images/debugging-guide/debugging-code-3.png" />
</div>

<p><code class="language-plaintext highlighter-rouge">main()</code> is called from the global namespace, we run <code class="language-plaintext highlighter-rouge">main()</code>’s code until it hits <code class="language-plaintext highlighter-rouge">average()</code>, <code class="language-plaintext highlighter-rouge">average()</code> returns back a value to <code class="language-plaintext highlighter-rouge">main()</code>, where we then run the rest of <code class="language-plaintext highlighter-rouge">main()</code>’s code until we return back to the global namespace.</p>

<p>The way your computer tracks these nested function calls is through what’s referred to as the <strong>call stack</strong>. You can think of the call stack as being a stack of books where each book represents a function. We place the <code class="language-plaintext highlighter-rouge">main()</code> book first, read through some of it, then place the <code class="language-plaintext highlighter-rouge">average()</code> book on top of the <code class="language-plaintext highlighter-rouge">main()</code> book on line 15. In order to get back to reading the <code class="language-plaintext highlighter-rouge">main()</code> book, we have to read the <code class="language-plaintext highlighter-rouge">average()</code> book on top of it to take it off the stack and get back to reading the <code class="language-plaintext highlighter-rouge">main()</code> book.</p>

<p>These principles on control and the call stack apply to <em>all</em> programming languages. And, if you understand it well, then the debugger will make a lot more sense to you.</p>

<h2 id="terminology">Terminology</h2>

<p>There are some terms you’ll need to be familiar with before jumping-in. You’ll see practical demonstrations soon.</p>

<ul>
  <li><strong>Breakpoint</strong> - A marker set by the programmer at a particular line of code that indicates where program control should halt until the next command dictated by the programmer.</li>
  <li><strong>Step/Stepping</strong> - Executing the program line-by-line.</li>
  <li><strong>Continue</strong> - A command that runs program execution until the next breakpoint, or until the program ends.</li>
  <li><strong>Step Over</strong> - A command that executes one line of code without going into any function that line might be invoking.</li>
  <li><strong>Step Into</strong> - A command that executes one line of code and goes into any function that line might be invoking.</li>
  <li><strong>Step Out</strong> - A command that runs the function when control has stepped into one, bringing control back to the line that called the function via its return.</li>
  <li><strong>Restart</strong> - A command that re-executes the program from the beginning with the debugger active.</li>
  <li><strong>Stop</strong> - A command that exits the debugger and halts program execution entirely.</li>
</ul>

<h2 id="demonstration">Demonstration</h2>

<p>I would encourage you to follow-along with this demonstration on your own code editor. <a href="https://www.python.org/">You can install Python here</a> if you don’t have it. On VSCode specifically, you’ll also want to install the “Python” extension by Microsoft, which can be found in the extensions marketplace.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="k">def</span> <span class="nf">average</span><span class="p">(</span><span class="n">li</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">li</span><span class="p">:</span>
        <span class="n">avg</span> <span class="o">+=</span> <span class="n">num</span>
    <span class="n">avg</span> <span class="o">/=</span> <span class="nb">len</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">avg</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">li</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">li</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    
    <span class="n">avg</span> <span class="o">=</span> <span class="n">average</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">avg</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>

</code></pre></div></div>

<p>On most code editors, you can set a breakpoint by clicking directly to the left of a line number. This is often represented as a red dot.</p>

<p>Since we know that control will ultimately reach the <code class="language-plaintext highlighter-rouge">main()</code> function, let’s place a breakpoint on its first line.</p>

<p><img src="assets/images/debugging-guide/1.png" /></p>

<p>To run our program with the debugger enabled, you can hit F5 (on VSCode) to see that our program halts at the breakpoint we just set, represented by the yellow highlight.</p>

<p><img src="assets/images/debugging-guide/2.png" /></p>

<p>This yellow highlight also represents the next line to be ran by command of the programmer. But, how do we give commands?</p>

<p>At the top, you’ll see that a tiny control panel appears when the debugger is active:</p>

<div align="center">
    <img src="assets/images/vscode-installation-macos/control-panel.png" />
</div>

<p>These options are the “commands” described in the <a href="#terminology">Terminology</a> section. We have, in order: Continue, Step Over, Step Into, Step Out, Restart, and Stop.</p>

<p>Try hitting the Step Over button slowly until you reach line 15 (but don’t execute the line just yet), paying attention to the VARIABLES panel on the left side.</p>

<p><img src="assets/images/debugging-guide/3.png" /></p>

<p>Hopefully you saw <code class="language-plaintext highlighter-rouge">li</code> slowly expand with new random integers every time you stepped. After control has flowed beyond the for-loop, you can click <code class="language-plaintext highlighter-rouge">li</code> in the VARIABLES panel to see the list’s content, conveniently denoted by index.</p>

<p>This is one of the most powerful features of the debugger – being able to see your data structures as they’re being built in realtime. This can help diagnose issues with your code, and it can help with visualizing how your structures are setup if you have complicated, nested constructs.</p>

<p>Moving on, then, we have a few options on line 15. We could Step Over again, which would bring us to line 16, or we could Step <em>Into</em> to see how our <code class="language-plaintext highlighter-rouge">average()</code> function is running – let’s hit Step Into once.</p>

<p><img src="assets/images/debugging-guide/4.png" /></p>

<p>We’re now inside <code class="language-plaintext highlighter-rouge">average()</code>, with the <code class="language-plaintext highlighter-rouge">avg = 0</code> expression being the next line to run. Now, what’s going to happen here?</p>

<p>We should expect that lines 5-6 are going to go through every element of the list, adding each to the variable, <code class="language-plaintext highlighter-rouge">avg</code>. Since we know what’s going to happen here, and we’re confident that this code will run properly, let’s place another breakpoint at line 7 and hit Continue to <em>skip</em> the amount of steps taken on lines 5-6.</p>

<p><img src="assets/images/debugging-guide/5.png" /></p>

<p>This is the main purpose of the Continue command – skipping sections of code that we know are going to run properly. What would happen if we <em>didn’t</em> set a breakpoint at line 7?</p>

<p>Well, we’d calculate the average, return back to <code class="language-plaintext highlighter-rouge">main()</code>, print the average, and return back to line 19. This is another property of the command – Continue will run program execution either until there’s another breakpoint, or until the program terminates. Be careful with how you use Continue, ensure that your program’s control <em>will</em> hit another breakpoint eventually if you don’t want the program to simply end.</p>

<p>Up next, we see that <code class="language-plaintext highlighter-rouge">avg</code> is going to be divided through by the length of <code class="language-plaintext highlighter-rouge">li</code>, and returned back to the caller. If we’re confident that the rest of this function is going to do its job properly, let’s hit Step Out to execute the rest of the function we’re in and return back to <code class="language-plaintext highlighter-rouge">main()</code>.</p>

<p><img src="assets/images/debugging-guide/6.png" /></p>

<p>You can see in the VARIABLES panel that VSCode tells us the return value from our function (3.8, in my case), and if we Step Over once…</p>

<p><img src="assets/images/debugging-guide/7.png" /></p>

<p>…our <code class="language-plaintext highlighter-rouge">avg</code> variable in <code class="language-plaintext highlighter-rouge">main()</code> obtains that value, since we assigned it to the call of <code class="language-plaintext highlighter-rouge">average()</code>. Pretty neat!</p>

<p>This is the primary application of Step Out. If we’re inside a function, we can let the rest of the function do its thing, eventually leading back to the caller of that function.</p>

<p>After this, we’re pretty much done! The last line to run is <code class="language-plaintext highlighter-rouge">print(avg)</code>, where control has officially ended afterwards since there’s nothing else below the lines:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>There are two commands I didn’t showcase here, that being Restart and Stop. These two are pretty self-explanatory. Restart will stop your current debugging session and re-execute the program from the beginning with the debugger, and Stop will simply halt the debugging session and your program entirely.</p>

<p>You’ll notice that there is no way to “Step Back” a line like there is on PythonTutor, for instance. I don’t think there’s an IDE debugger that has that feature (though I could be wrong) – the best substitute would likely be to set a breakpoint on a prior line and hit Restart.</p>

<p>To avoid the need of having some sort of Step Back command, you should <strong>always</strong> think ahead on where your program’s control will lead. <strong>Set expectations</strong> on what you believe should happen when you run a particular line or set of lines, and deduce the problematic expressions from there.</p>

<p>Hopefully you found this guide helpful! Please don’t hesitate to ask about the debugger on Piazza.</p>

        </div>
    </div>
    <script src="/CSE232/assets/js/progressbar.js" type="text/javascript"></script>
</body>
</html>